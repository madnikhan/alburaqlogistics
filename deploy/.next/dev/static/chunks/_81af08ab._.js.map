{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadmadni/alburaqlogistics/lib/packages.ts"],"sourcesContent":["import { Package, ServiceType } from '@/types';\n\n// Packages tailored for Birmingham UK market with base prices\n// Final price = base price + (distance × £1.20 per mile)\nexport const packages: Package[] = [\n  // Removals Packages\n  {\n    id: 'removal-basic',\n    name: 'Basic Removal',\n    serviceType: 'removals',\n    description: 'Perfect for small moves within Birmingham',\n    price: 450, // Base price\n    features: [\n      '1-2 bedroom removal',\n      '2 movers',\n      'Standard van',\n      'Basic insurance',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 4,\n    maxDistance: 50, // Maximum distance covered\n    includes: ['Loading', 'Transportation', 'Unloading']\n  },\n  {\n    id: 'removal-standard',\n    name: 'Standard Removal',\n    serviceType: 'removals',\n    description: 'Ideal for medium-sized moves',\n    price: 600, // Base price\n    features: [\n      '2-3 bedroom removal',\n      '3 movers',\n      'Large van',\n      'Full insurance',\n      'Packing materials included',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 6,\n    maxDistance: 75,\n    includes: ['Loading', 'Transportation', 'Unloading', 'Packing assistance']\n  },\n  {\n    id: 'removal-premium',\n    name: 'Premium Removal',\n    serviceType: 'removals',\n    description: 'Complete removal service with full support',\n    price: 900, // Base price\n    features: [\n      '3+ bedroom removal',\n      '4 movers',\n      'Large van + trailer',\n      'Premium insurance',\n      'Full packing service',\n      'Furniture disassembly',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 8,\n    maxDistance: 100,\n    includes: ['Full packing', 'Loading', 'Transportation', 'Unloading', 'Unpacking', 'Furniture assembly']\n  },\n  \n  // Office Moving Packages\n  {\n    id: 'office-small',\n    name: 'Small Office Move',\n    serviceType: 'office-moving',\n    description: 'Perfect for small businesses (up to 10 employees)',\n    price: 600, // Base price\n    features: [\n      'Up to 20 desks',\n      'IT equipment handling',\n      '3 movers',\n      'Office insurance',\n      'Weekend/evening options',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 6,\n    maxDistance: 50,\n    includes: ['Desk moving', 'IT equipment', 'Filing cabinets', 'Basic setup']\n  },\n  {\n    id: 'office-medium',\n    name: 'Medium Office Move',\n    serviceType: 'office-moving',\n    description: 'Ideal for medium-sized businesses (10-30 employees)',\n    price: 900, // Base price\n    features: [\n      'Up to 40 desks',\n      'IT equipment handling',\n      '5 movers',\n      'Full office insurance',\n      'Flexible scheduling',\n      'Storage options',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 10,\n    maxDistance: 75,\n    includes: ['Complete office relocation', 'IT setup', 'Furniture assembly', 'Storage solutions']\n  },\n  {\n    id: 'office-large',\n    name: 'Large Office Move',\n    serviceType: 'office-moving',\n    description: 'Complete office relocation service',\n    price: 1500, // Base price\n    features: [\n      '40+ desks',\n      'Full IT infrastructure',\n      '8+ movers',\n      'Premium insurance',\n      'Project management',\n      'Storage & warehousing',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 16,\n    maxDistance: 100,\n    includes: ['Full relocation', 'IT infrastructure', 'Project management', 'Storage', 'Setup & configuration']\n  },\n  \n  // House Moving Packages\n  {\n    id: 'house-studio',\n    name: 'Studio/1 Bed Move',\n    serviceType: 'house-moving',\n    description: 'Perfect for studio or 1 bedroom properties',\n    price: 450, // Base price - matches Birmingham market (£450-£600)\n    features: [\n      'Studio/1 bedroom',\n      '2 movers',\n      'Medium van',\n      'Standard insurance',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 5,\n    maxDistance: 50,\n    includes: ['Loading', 'Transportation', 'Unloading']\n  },\n  {\n    id: 'house-2bed',\n    name: '2 Bedroom Move',\n    serviceType: 'house-moving',\n    description: 'Ideal for 2 bedroom homes',\n    price: 600, // Base price - matches Birmingham market (£600-£900)\n    features: [\n      '2 bedroom property',\n      '3 movers',\n      'Large van',\n      'Full insurance',\n      'Packing materials',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 7,\n    maxDistance: 75,\n    includes: ['Loading', 'Transportation', 'Unloading', 'Packing assistance']\n  },\n  {\n    id: 'house-3bed',\n    name: '3 Bedroom Move',\n    serviceType: 'house-moving',\n    description: 'Complete service for 3 bedroom homes',\n    price: 900, // Base price - matches Birmingham market (£900-£1,500)\n    features: [\n      '3 bedroom property',\n      '4 movers',\n      'Large van + trailer',\n      'Premium insurance',\n      'Full packing service',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 9,\n    maxDistance: 100,\n    includes: ['Full packing', 'Loading', 'Transportation', 'Unloading', 'Unpacking']\n  },\n  {\n    id: 'house-4bed',\n    name: '4+ Bedroom Move',\n    serviceType: 'house-moving',\n    description: 'Premium service for large family homes',\n    price: 1200, // Base price - matches Birmingham market (£1,200-£2,000+)\n    features: [\n      '4+ bedroom property',\n      '5+ movers',\n      'Multiple vehicles',\n      'Premium insurance',\n      'Full packing & unpacking',\n      'Furniture disassembly',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 12,\n    maxDistance: 150,\n    includes: ['Complete service', 'Packing', 'Loading', 'Transportation', 'Unloading', 'Unpacking', 'Assembly']\n  },\n  \n  // Pallet Services\n  {\n    id: 'pallet-single',\n    name: 'Single Pallet',\n    serviceType: 'pallets',\n    description: 'Single pallet delivery within Birmingham',\n    price: 85, // Base price\n    features: [\n      '1 standard pallet',\n      'Next day delivery',\n      'Standard insurance',\n      'Collection & delivery',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 2,\n    maxDistance: 30,\n    includes: ['Collection', 'Transportation', 'Delivery']\n  },\n  {\n    id: 'pallet-multi',\n    name: 'Multiple Pallets',\n    serviceType: 'pallets',\n    description: 'Multiple pallet delivery service',\n    price: 150, // Base price\n    features: [\n      '2-4 pallets',\n      'Next day delivery',\n      'Full insurance',\n      'Collection & delivery',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 3,\n    maxDistance: 50,\n    includes: ['Collection', 'Transportation', 'Delivery', 'Pallet wrapping']\n  },\n  {\n    id: 'pallet-bulk',\n    name: 'Bulk Pallet Service',\n    serviceType: 'pallets',\n    description: 'Large quantity pallet delivery',\n    price: 300, // Base price\n    features: [\n      '5+ pallets',\n      'Flexible scheduling',\n      'Premium insurance',\n      'Warehouse to warehouse',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 5,\n    maxDistance: 100,\n    includes: ['Bulk collection', 'Transportation', 'Delivery', 'Pallet management']\n  }\n];\n\nexport const getPackagesByService = (serviceType: ServiceType): Package[] => {\n  return packages.filter(pkg => pkg.serviceType === serviceType);\n};\n\nexport const getPackageById = (id: string): Package | undefined => {\n  return packages.find(pkg => pkg.id === id);\n};\n\n// Price per mile for distance calculation\nexport const PRICE_PER_MILE = 1.20;\n"],"names":[],"mappings":";;;;;;;;;;AAIO,MAAM,WAAsB;IACjC,oBAAoB;IACpB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAW;YAAkB;SAAY;IACtD;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAW;YAAkB;YAAa;SAAqB;IAC5E;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAgB;YAAW;YAAkB;YAAa;YAAa;SAAqB;IACzG;IAEA,yBAAyB;IACzB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAe;YAAgB;YAAmB;SAAc;IAC7E;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAA8B;YAAY;YAAsB;SAAoB;IACjG;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAmB;YAAqB;YAAsB;YAAW;SAAwB;IAC9G;IAEA,wBAAwB;IACxB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAW;YAAkB;SAAY;IACtD;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAW;YAAkB;YAAa;SAAqB;IAC5E;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAgB;YAAW;YAAkB;YAAa;SAAY;IACnF;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAoB;YAAW;YAAW;YAAkB;YAAa;YAAa;SAAW;IAC9G;IAEA,kBAAkB;IAClB;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAc;YAAkB;SAAW;IACxD;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAc;YAAkB;YAAY;SAAkB;IAC3E;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,aAAa;QACb,OAAO;QACP,UAAU;YACR;YACA;YACA;YACA;YACA;SACD;QACD,gBAAgB;QAChB,aAAa;QACb,UAAU;YAAC;YAAmB;YAAkB;YAAY;SAAoB;IAClF;CACD;AAEM,MAAM,uBAAuB,CAAC;IACnC,OAAO,SAAS,MAAM,CAAC,CAAA,MAAO,IAAI,WAAW,KAAK;AACpD;AAEO,MAAM,iBAAiB,CAAC;IAC7B,OAAO,SAAS,IAAI,CAAC,CAAA,MAAO,IAAI,EAAE,KAAK;AACzC;AAGO,MAAM,iBAAiB"}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadmadni/alburaqlogistics/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Initialize Firebase\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\n\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\nexport default app;\n\n"],"names":[],"mappings":";;;;;;;;AAKU;AALV;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACP;AAEA,sBAAsB;AACtB,MAAM,MAAM,IAAA,8KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,oLAAa,EAAC,kBAAkB,IAAA,8KAAO,GAAE,CAAC,EAAE;AAE1E,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,OAAO,IAAA,wKAAO,EAAC;uCACb"}},
    {"offset": {"line": 374, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadmadni/alburaqlogistics/lib/firestore.ts"],"sourcesContent":["import { \n  collection, \n  addDoc, \n  getDocs, \n  doc, \n  getDoc, \n  updateDoc,\n  query,\n  where,\n  Timestamp\n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { Booking } from '@/types';\n\nconst BOOKINGS_COLLECTION = 'bookings';\n\nexport const createBooking = async (booking: Omit<Booking, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> => {\n  try {\n    const bookingData = {\n      ...booking,\n      createdAt: Timestamp.now(),\n      updatedAt: Timestamp.now()\n    };\n    const docRef = await addDoc(collection(db, BOOKINGS_COLLECTION), bookingData);\n    return docRef.id;\n  } catch (error) {\n    console.error('Error creating booking:', error);\n    throw error;\n  }\n};\n\nexport const getBooking = async (bookingId: string): Promise<Booking | null> => {\n  try {\n    const docRef = doc(db, BOOKINGS_COLLECTION, bookingId);\n    const docSnap = await getDoc(docRef);\n    \n    if (docSnap.exists()) {\n      const data = docSnap.data();\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate(),\n        updatedAt: data.updatedAt?.toDate()\n      } as Booking;\n    }\n    return null;\n  } catch (error) {\n    console.error('Error getting booking:', error);\n    throw error;\n  }\n};\n\nexport const updateBookingStatus = async (\n  bookingId: string, \n  status: Booking['status'],\n  paymentStatus?: Booking['paymentStatus']\n): Promise<void> => {\n  try {\n    const docRef = doc(db, BOOKINGS_COLLECTION, bookingId);\n    const updateData: any = {\n      status,\n      updatedAt: Timestamp.now()\n    };\n    \n    if (paymentStatus) {\n      updateData.paymentStatus = paymentStatus;\n    }\n    \n    await updateDoc(docRef, updateData);\n  } catch (error) {\n    console.error('Error updating booking:', error);\n    throw error;\n  }\n};\n\nexport const getBookingsByEmail = async (email: string): Promise<Booking[]> => {\n  try {\n    const q = query(collection(db, BOOKINGS_COLLECTION), where('email', '==', email));\n    const querySnapshot = await getDocs(q);\n    \n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data(),\n      createdAt: doc.data().createdAt?.toDate(),\n      updatedAt: doc.data().updatedAt?.toDate()\n    })) as Booking[];\n  } catch (error) {\n    console.error('Error getting bookings:', error);\n    throw error;\n  }\n};\n\nexport const getAllBookings = async (): Promise<Booking[]> => {\n  try {\n    const querySnapshot = await getDocs(collection(db, BOOKINGS_COLLECTION));\n    \n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data(),\n      createdAt: doc.data().createdAt?.toDate(),\n      updatedAt: doc.data().updatedAt?.toDate()\n    })) as Booking[];\n  } catch (error) {\n    console.error('Error getting all bookings:', error);\n    throw error;\n  }\n};\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAWA;;;AAGA,MAAM,sBAAsB;AAErB,MAAM,gBAAgB,OAAO;IAClC,IAAI;QACF,MAAM,cAAc;YAClB,GAAG,OAAO;YACV,WAAW,+KAAS,CAAC,GAAG;YACxB,WAAW,+KAAS,CAAC,GAAG;QAC1B;QACA,MAAM,SAAS,MAAM,IAAA,4KAAM,EAAC,IAAA,gLAAU,EAAC,wHAAE,EAAE,sBAAsB;QACjE,OAAO,OAAO,EAAE;IAClB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACR;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,SAAS,IAAA,yKAAG,EAAC,wHAAE,EAAE,qBAAqB;QAC5C,MAAM,UAAU,MAAM,IAAA,4KAAM,EAAC;QAE7B,IAAI,QAAQ,MAAM,IAAI;YACpB,MAAM,OAAO,QAAQ,IAAI;YACzB,OAAO;gBACL,IAAI,QAAQ,EAAE;gBACd,GAAG,IAAI;gBACP,WAAW,KAAK,SAAS,EAAE;gBAC3B,WAAW,KAAK,SAAS,EAAE;YAC7B;QACF;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,MAAM;IACR;AACF;AAEO,MAAM,sBAAsB,OACjC,WACA,QACA;IAEA,IAAI;QACF,MAAM,SAAS,IAAA,yKAAG,EAAC,wHAAE,EAAE,qBAAqB;QAC5C,MAAM,aAAkB;YACtB;YACA,WAAW,+KAAS,CAAC,GAAG;QAC1B;QAEA,IAAI,eAAe;YACjB,WAAW,aAAa,GAAG;QAC7B;QAEA,MAAM,IAAA,+KAAS,EAAC,QAAQ;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACR;AACF;AAEO,MAAM,qBAAqB,OAAO;IACvC,IAAI;QACF,MAAM,IAAI,IAAA,2KAAK,EAAC,IAAA,gLAAU,EAAC,wHAAE,EAAE,sBAAsB,IAAA,2KAAK,EAAC,SAAS,MAAM;QAC1E,MAAM,gBAAgB,MAAM,IAAA,6KAAO,EAAC;QAEpC,OAAO,cAAc,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;gBACpC,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI,IAAI,EAAE;gBACb,WAAW,IAAI,IAAI,GAAG,SAAS,EAAE;gBACjC,WAAW,IAAI,IAAI,GAAG,SAAS,EAAE;YACnC,CAAC;IACH,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACR;AACF;AAEO,MAAM,iBAAiB;IAC5B,IAAI;QACF,MAAM,gBAAgB,MAAM,IAAA,6KAAO,EAAC,IAAA,gLAAU,EAAC,wHAAE,EAAE;QAEnD,OAAO,cAAc,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;gBACpC,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI,IAAI,EAAE;gBACb,WAAW,IAAI,IAAI,GAAG,SAAS,EAAE;gBACjC,WAAW,IAAI,IAAI,GAAG,SAAS,EAAE;YACnC,CAAC;IACH,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,MAAM;IACR;AACF"}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadmadni/alburaqlogistics/lib/distance-calculator.ts"],"sourcesContent":["/**\n * Calculate distance between two UK addresses\n * Supports multiple providers:\n * 1. OpenRouteService (FREE - recommended)\n * 2. Google Maps API (requires API key)\n * 3. Postcode estimation (fallback - always works)\n */\n\nexport interface Location {\n  address: string;\n  postcode?: string;\n}\n\nexport interface DistanceResult {\n  distance: number; // in miles\n  duration?: number; // in minutes\n  error?: string;\n}\n\n/**\n * Extract postcode from address string\n */\nexport function extractPostcode(address: string): string | null {\n  // UK postcode pattern: e.g., B1 1AA, B12 8AB, etc.\n  const postcodeRegex = /([A-Z]{1,2}[0-9][A-Z0-9]?\\s?[0-9][A-Z]{2})/i;\n  const match = address.match(postcodeRegex);\n  return match ? match[1].toUpperCase().replace(/\\s/g, ' ') : null;\n}\n\n/**\n * Calculate distance using OpenRouteService API (FREE)\n * Sign up at https://openrouteservice.org/ for a free API key\n * Free tier: 2,000 requests/day\n */\nasync function calculateDistanceWithOpenRouteService(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult | null> {\n  const apiKey = process.env.NEXT_PUBLIC_OPENROUTE_API_KEY;\n  \n  if (!apiKey) {\n    return null; // API not configured\n  }\n\n  try {\n    // First, geocode addresses to get coordinates\n    const geocodeStart = await fetch(\n      `https://api.openrouteservice.org/geocoding/search?` +\n      `api_key=${apiKey}` +\n      `&text=${encodeURIComponent(startAddress)}` +\n      `&boundary.country=GB`\n    );\n    const geocodeEnd = await fetch(\n      `https://api.openrouteservice.org/geocoding/search?` +\n      `api_key=${apiKey}` +\n      `&text=${encodeURIComponent(endAddress)}` +\n      `&boundary.country=GB`\n    );\n\n    const startData = await geocodeStart.json();\n    const endData = await geocodeEnd.json();\n\n    if (!startData.features?.[0] || !endData.features?.[0]) {\n      return null; // Geocoding failed\n    }\n\n    const startCoords = startData.features[0].geometry.coordinates; // [lng, lat]\n    const endCoords = endData.features[0].geometry.coordinates;\n\n    // Calculate distance using directions API\n    const directionsResponse = await fetch(\n      `https://api.openrouteservice.org/v2/directions/driving-car?` +\n      `api_key=${apiKey}` +\n      `&start=${startCoords[0]},${startCoords[1]}` +\n      `&end=${endCoords[0]},${endCoords[1]}`\n    );\n\n    const directionsData = await directionsResponse.json();\n\n    if (directionsData.features?.[0]?.properties?.segments?.[0]) {\n      const segment = directionsData.features[0].properties.segments[0];\n      const distanceInMeters = segment.distance;\n      const durationInSeconds = segment.duration;\n      \n      const distanceInMiles = distanceInMeters / 1609.34; // Convert to miles\n      const durationInMinutes = durationInSeconds / 60;\n\n      return {\n        distance: Math.round(distanceInMiles * 10) / 10,\n        duration: Math.round(durationInMinutes),\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.error('OpenRouteService API error:', error);\n    return null; // Fall back to other methods\n  }\n}\n\n/**\n * Calculate distance using Google Maps Distance Matrix API\n */\nasync function calculateDistanceWithGoogleMaps(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult | null> {\n  const apiKey = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY;\n  \n  if (!apiKey) {\n    return null;\n  }\n\n  try {\n    const response = await fetch(\n      `https://maps.googleapis.com/maps/api/distancematrix/json?` +\n      `origins=${encodeURIComponent(startAddress)}` +\n      `&destinations=${encodeURIComponent(endAddress)}` +\n      `&units=imperial` +\n      `&key=${apiKey}`\n    );\n\n    const data = await response.json();\n\n    if (data.status === 'OK' && data.rows[0]?.elements[0]?.status === 'OK') {\n      const element = data.rows[0].elements[0];\n      const distanceInMiles = element.distance.value / 1609.34;\n      const durationInMinutes = element.duration.value / 60;\n\n      return {\n        distance: Math.round(distanceInMiles * 10) / 10,\n        duration: Math.round(durationInMinutes),\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Google Maps API error:', error);\n    return null;\n  }\n}\n\n/**\n * Calculate distance using UK Postcode.io API (FREE for UK postcodes)\n * No API key required for basic distance calculation\n */\nasync function calculateDistanceWithPostcodeIO(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult | null> {\n  const startPostcode = extractPostcode(startAddress);\n  const endPostcode = extractPostcode(endAddress);\n\n  if (!startPostcode || !endPostcode) {\n    return null; // Need postcodes for this API\n  }\n\n  try {\n    // Get coordinates for both postcodes\n    const startResponse = await fetch(\n      `https://api.postcodes.io/postcodes/${encodeURIComponent(startPostcode.replace(/\\s/g, ''))}`\n    );\n    const endResponse = await fetch(\n      `https://api.postcodes.io/postcodes/${encodeURIComponent(endPostcode.replace(/\\s/g, ''))}`\n    );\n\n    const startData = await startResponse.json();\n    const endData = await endResponse.json();\n\n    if (startData.status !== 200 || endData.status !== 200) {\n      return null;\n    }\n\n    const startLat = startData.result.latitude;\n    const startLng = startData.result.longitude;\n    const endLat = endData.result.latitude;\n    const endLng = endData.result.longitude;\n\n    // Calculate straight-line distance (Haversine formula)\n    const R = 3959; // Earth's radius in miles\n    const dLat = (endLat - startLat) * Math.PI / 180;\n    const dLng = (endLng - startLng) * Math.PI / 180;\n    const a = \n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(startLat * Math.PI / 180) * Math.cos(endLat * Math.PI / 180) *\n      Math.sin(dLng / 2) * Math.sin(dLng / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c;\n\n    // Add 20% for road distance vs straight-line\n    const roadDistance = distance * 1.2;\n\n    return {\n      distance: Math.round(roadDistance * 10) / 10,\n    };\n  } catch (error) {\n    console.error('Postcode.io API error:', error);\n    return null;\n  }\n}\n\n/**\n * Estimate distance based on UK postcodes (fallback method)\n * Uses postcode area codes to estimate distance\n */\nfunction estimateDistanceFromPostcodes(startAddress: string, endAddress: string): number {\n  const startPostcode = extractPostcode(startAddress);\n  const endPostcode = extractPostcode(endAddress);\n\n  // If we can't extract postcodes, estimate based on address similarity\n  if (!startPostcode || !endPostcode) {\n    if (startAddress.toLowerCase().includes('birmingham') && \n        endAddress.toLowerCase().includes('birmingham')) {\n      return 8; // Average local Birmingham move\n    }\n    return 15; // Default estimate\n  }\n\n  // Extract area codes (first part of postcode)\n  const startArea = startPostcode.split(' ')[0];\n  const endArea = endPostcode.split(' ')[0];\n\n  // Same area code = very local (1-5 miles)\n  if (startArea === endArea) {\n    return 3;\n  }\n\n  // Different area codes in Birmingham (B postcodes)\n  if (startArea.startsWith('B') && endArea.startsWith('B')) {\n    return 12; // Average Birmingham local move\n  }\n\n  // One is Birmingham (B), other is not = regional (20-50 miles)\n  if ((startArea.startsWith('B') && !endArea.startsWith('B')) ||\n      (!startArea.startsWith('B') && endArea.startsWith('B'))) {\n    return 35;\n  }\n\n  // Both non-Birmingham = long distance (50+ miles)\n  return 75;\n}\n\n/**\n * Calculate distance between two addresses\n * Tries multiple methods in order:\n * 1. OpenRouteService (FREE - recommended)\n * 2. Google Maps API (if configured)\n * 3. Postcode.io (FREE - UK postcodes only)\n * 4. Postcode estimation (always works)\n */\nexport async function calculateDistance(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult> {\n  // Try OpenRouteService first (free and accurate)\n  const openRouteResult = await calculateDistanceWithOpenRouteService(startAddress, endAddress);\n  if (openRouteResult) {\n    return openRouteResult;\n  }\n\n  // Try Google Maps API\n  const googleResult = await calculateDistanceWithGoogleMaps(startAddress, endAddress);\n  if (googleResult) {\n    return googleResult;\n  }\n\n  // Try Postcode.io (free for UK postcodes)\n  const postcodeIOResult = await calculateDistanceWithPostcodeIO(startAddress, endAddress);\n  if (postcodeIOResult) {\n    return postcodeIOResult;\n  }\n\n  // Fallback to postcode estimation\n  const estimatedDistance = estimateDistanceFromPostcodes(startAddress, endAddress);\n  return {\n    distance: estimatedDistance,\n  };\n}\n\n/**\n * Calculate price based on base price + distance\n * Local moves (under 50 miles): Base price only\n * Long-distance (50-100 miles): Base price + £1.20 per mile for miles over 50\n * Very long distance (100+ miles): Base price + £1.50 per mile for miles over 100\n */\nexport function calculatePrice(\n  basePrice: number,\n  distance: number,\n  pricePerMile: number = 1.20\n): number {\n  const LOCAL_MOVE_THRESHOLD = 50; // Miles included in base price\n  const LONG_DISTANCE_THRESHOLD = 100; // Miles for higher rate\n\n  // Local moves: base price only (distance included)\n  if (distance <= LOCAL_MOVE_THRESHOLD) {\n    return basePrice;\n  }\n\n  // Long-distance moves: charge per mile for miles over threshold\n  const milesOverThreshold = distance - LOCAL_MOVE_THRESHOLD;\n  \n  // For very long distances (100+ miles), use higher rate\n  if (distance > LONG_DISTANCE_THRESHOLD) {\n    const miles50to100 = LONG_DISTANCE_THRESHOLD - LOCAL_MOVE_THRESHOLD;\n    const milesOver100 = distance - LONG_DISTANCE_THRESHOLD;\n    const distanceCharge = (miles50to100 * pricePerMile) + (milesOver100 * 1.50);\n    return basePrice + distanceCharge;\n  }\n\n  // Standard long-distance (50-100 miles)\n  const distanceCharge = milesOverThreshold * pricePerMile;\n  return basePrice + distanceCharge;\n}\n\n/**\n * Format distance for display\n */\nexport function formatDistance(distance: number): string {\n  if (distance < 1) {\n    return `${Math.round(distance * 10) / 10} miles`;\n  }\n  return `${Math.round(distance * 10) / 10} miles`;\n}\n\n/**\n * Get pricing breakdown for display\n */\nexport function getPricingBreakdown(basePrice: number, distance: number) {\n  const LOCAL_MOVE_THRESHOLD = 50;\n  const LONG_DISTANCE_THRESHOLD = 100;\n  const PRICE_PER_MILE = 1.20;\n  const PRICE_PER_MILE_LONG = 1.50;\n\n  if (distance <= LOCAL_MOVE_THRESHOLD) {\n    return {\n      basePrice,\n      distance,\n      includedMiles: distance,\n      chargeableMiles: 0,\n      distanceCharge: 0,\n      totalPrice: basePrice,\n      isLocalMove: true,\n    };\n  }\n\n  const milesOverThreshold = distance - LOCAL_MOVE_THRESHOLD;\n  let distanceCharge = 0;\n  let chargeableMiles = 0;\n\n  if (distance > LONG_DISTANCE_THRESHOLD) {\n    const miles50to100 = LONG_DISTANCE_THRESHOLD - LOCAL_MOVE_THRESHOLD;\n    const milesOver100 = distance - LONG_DISTANCE_THRESHOLD;\n    distanceCharge = (miles50to100 * PRICE_PER_MILE) + (milesOver100 * PRICE_PER_MILE_LONG);\n    chargeableMiles = milesOverThreshold;\n  } else {\n    distanceCharge = milesOverThreshold * PRICE_PER_MILE;\n    chargeableMiles = milesOverThreshold;\n  }\n\n  return {\n    basePrice,\n    distance,\n    includedMiles: LOCAL_MOVE_THRESHOLD,\n    chargeableMiles,\n    distanceCharge,\n    totalPrice: basePrice + distanceCharge,\n    isLocalMove: false,\n  };\n}\n\n/**\n * Price per mile for distance calculation\n */\nexport const PRICE_PER_MILE = 1.20;\nexport const LOCAL_MOVE_THRESHOLD = 50; // Miles included in base price\nexport const LONG_DISTANCE_THRESHOLD = 100; // Miles for higher per-mile rate\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 739, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadmadni/alburaqlogistics/components/PriceCalculator.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { \n  calculateDistance, \n  calculatePrice, \n  formatDistance, \n  getPricingBreakdown,\n  LOCAL_MOVE_THRESHOLD \n} from '@/lib/distance-calculator';\nimport { Package } from '@/types';\n\ninterface PriceCalculatorProps {\n  selectedPackage: Package | null;\n  pickupAddress: string;\n  deliveryAddress: string;\n  onPriceCalculated?: (price: {\n    basePrice: number;\n    distance: number;\n    distanceCharge: number;\n    totalPrice: number;\n  }) => void;\n}\n\nexport default function PriceCalculator({\n  selectedPackage,\n  pickupAddress,\n  deliveryAddress,\n  onPriceCalculated\n}: PriceCalculatorProps) {\n  const [distance, setDistance] = useState<number | null>(null);\n  const [calculating, setCalculating] = useState(false);\n  const [totalPrice, setTotalPrice] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (selectedPackage && pickupAddress && deliveryAddress && \n        pickupAddress.length > 10 && deliveryAddress.length > 10) {\n      calculateDistanceAndPrice();\n    } else {\n      setDistance(null);\n      setTotalPrice(null);\n    }\n  }, [selectedPackage, pickupAddress, deliveryAddress]);\n\n  const calculateDistanceAndPrice = async () => {\n    if (!selectedPackage) return;\n\n    setCalculating(true);\n    \n    try {\n      // Calculate distance (uses Google Maps API if available, otherwise estimates)\n      const distanceResult = await calculateDistance(pickupAddress, deliveryAddress);\n      const calculatedDistance = distanceResult.distance;\n      \n      const basePrice = selectedPackage.price;\n      const breakdown = getPricingBreakdown(basePrice, calculatedDistance);\n      const finalPrice = breakdown.totalPrice;\n\n      setDistance(calculatedDistance);\n      setTotalPrice(finalPrice);\n\n      // Notify parent component\n      if (onPriceCalculated) {\n        onPriceCalculated({\n          basePrice,\n          distance: calculatedDistance,\n          distanceCharge: breakdown.distanceCharge,\n          totalPrice: finalPrice\n        });\n      }\n    } catch (error) {\n      console.error('Error calculating distance:', error);\n      // Fallback to base price if calculation fails\n      setDistance(0);\n      setTotalPrice(selectedPackage.price);\n    } finally {\n      setCalculating(false);\n    }\n  };\n\n  if (!selectedPackage) {\n    return null;\n  }\n\n  if (calculating) {\n    return (\n      <div className=\"bg-blue-50 rounded-lg p-4 mb-6\">\n        <div className=\"flex items-center\">\n          <svg className=\"animate-spin h-5 w-5 text-blue-600 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <span className=\"text-blue-700\">Calculating price...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (distance === null || totalPrice === null) {\n    return (\n      <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n        <p className=\"text-sm text-gray-600\">\n          Enter pickup and delivery addresses to calculate the total price.\n        </p>\n      </div>\n    );\n  }\n\n  const breakdown = getPricingBreakdown(selectedPackage.price, distance);\n\n  return (\n    <div className=\"bg-[#092439]/10 rounded-lg p-4 sm:p-6 mb-6 border border-[#D4AF37]/30\">\n      <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-4\">\n        Price Breakdown\n      </h3>\n      \n      <div className=\"space-y-2 mb-4\">\n        <div className=\"flex justify-between text-sm sm:text-base\">\n          <span className=\"text-gray-600\">Base Price:</span>\n          <span className=\"font-medium text-gray-900\">£{breakdown.basePrice.toFixed(2)}</span>\n        </div>\n        \n        <div className=\"flex justify-between text-sm sm:text-base\">\n          <span className=\"text-gray-600\">Distance:</span>\n          <span className=\"font-medium text-gray-900\">{formatDistance(distance)}</span>\n        </div>\n\n        {breakdown.isLocalMove ? (\n          <div className=\"bg-green-50 rounded p-2 mt-2\">\n            <p className=\"text-xs sm:text-sm text-green-800\">\n              ✓ Local move: Distance included in base price (up to {LOCAL_MOVE_THRESHOLD} miles)\n            </p>\n          </div>\n        ) : (\n          <>\n            <div className=\"flex justify-between text-sm sm:text-base mt-2\">\n              <span className=\"text-gray-600\">\n                Included miles ({breakdown.includedMiles} miles):\n              </span>\n              <span className=\"font-medium text-gray-900\">£0.00</span>\n            </div>\n            <div className=\"flex justify-between text-sm sm:text-base\">\n              <span className=\"text-gray-600\">\n                Additional miles ({breakdown.chargeableMiles.toFixed(1)} miles × £1.20/mile):\n              </span>\n              <span className=\"font-medium text-gray-900\">£{breakdown.distanceCharge.toFixed(2)}</span>\n            </div>\n            {distance > 100 && (\n              <p className=\"text-xs text-gray-600 mt-1\">\n                Note: Miles over 100 charged at £1.50/mile\n              </p>\n            )}\n          </>\n        )}\n        \n        <div className=\"border-t border-[#D4AF37]/30 pt-2 mt-2\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-lg sm:text-xl font-semibold text-gray-900\">Total Price:</span>\n            <span className=\"text-2xl sm:text-3xl font-bold text-[#D4AF37]\">\n              £{totalPrice.toFixed(2)}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"text-xs sm:text-sm text-gray-600 bg-white rounded p-2\">\n        <p className=\"mb-1\">\n          <strong>Pricing:</strong> Base price includes up to {LOCAL_MOVE_THRESHOLD} miles. \n          {!breakdown.isLocalMove && ' Additional miles charged at £1.20/mile (50-100 miles) or £1.50/mile (100+ miles).'}\n        </p>\n        <p>Distance: {formatDistance(distance)} \n          {process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY ? ' (calculated)' : ' (estimated from postcodes)'}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1138, "column": 0}, "map": {"version":3,"sources":["file:///Users/muhammadmadni/alburaqlogistics/app/book/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, Suspense } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { getPackageById, getPackagesByService } from '@/lib/packages';\nimport { createBooking } from '@/lib/firestore';\nimport { Package, ServiceType } from '@/types';\nimport { loadStripe } from '@stripe/stripe-js';\nimport PriceCalculator from '@/components/PriceCalculator';\nimport { calculateDistance, calculatePrice, getPricingBreakdown } from '@/lib/distance-calculator';\n\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || '');\n\nconst bookingSchema = z.object({\n  customerName: z.string().min(2, 'Name must be at least 2 characters'),\n  email: z.string().email('Invalid email address'),\n  phone: z.string().min(10, 'Phone number must be at least 10 digits'),\n  serviceType: z.enum(['removals', 'office-moving', 'house-moving', 'pallets']),\n  packageId: z.string(),\n  pickupAddress: z.string().min(10, 'Please provide a complete pickup address'),\n  deliveryAddress: z.string().min(10, 'Please provide a complete delivery address'),\n  pickupDate: z.string().min(1, 'Please select a pickup date'),\n  pickupTime: z.string().min(1, 'Please select a pickup time'),\n  specialInstructions: z.string().optional(),\n});\n\ntype BookingFormData = z.infer<typeof bookingSchema>;\n\nfunction BookPageContent() {\n  const searchParams = useSearchParams();\n  const [selectedPackage, setSelectedPackage] = useState<Package | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [bookingId, setBookingId] = useState<string | null>(null);\n  const [calculatedPrice, setCalculatedPrice] = useState<{\n    basePrice: number;\n    distance: number;\n    distanceCharge: number;\n    totalPrice: number;\n  } | null>(null);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    setValue,\n    watch,\n  } = useForm<BookingFormData>({\n    resolver: zodResolver(bookingSchema),\n  });\n\n  const serviceType = watch('serviceType');\n  const pickupAddress = watch('pickupAddress');\n  const deliveryAddress = watch('deliveryAddress');\n\n  useEffect(() => {\n    const serviceParam = searchParams.get('service') as ServiceType;\n    const packageParam = searchParams.get('package');\n\n    if (serviceParam) {\n      setValue('serviceType', serviceParam);\n    }\n    if (packageParam) {\n      setValue('packageId', packageParam);\n      const pkg = getPackageById(packageParam);\n      setSelectedPackage(pkg || null);\n    }\n  }, [searchParams, setValue]);\n\n  const onSubmit = async (data: BookingFormData) => {\n    if (!selectedPackage) {\n      alert('Please select a package');\n      return;\n    }\n\n    setIsSubmitting(true);\n    setBookingId(null);\n\n    try {\n      // Calculate distance and final price\n      const distanceResult = await calculateDistance(data.pickupAddress, data.deliveryAddress);\n      const distance = distanceResult.distance;\n      const basePrice = selectedPackage.price;\n      \n      // Use calculated price if available, otherwise calculate now\n      let finalPrice: number;\n      let distanceCharge: number;\n      \n      if (calculatedPrice) {\n        finalPrice = calculatedPrice.totalPrice;\n        distanceCharge = calculatedPrice.distanceCharge;\n      } else {\n        const breakdown = getPricingBreakdown(basePrice, distance);\n        finalPrice = breakdown.totalPrice;\n        distanceCharge = breakdown.distanceCharge;\n      }\n\n      // Create booking in Firestore\n      const bookingData = {\n        ...data,\n        totalPrice: finalPrice,\n        basePrice: basePrice,\n        distance: distance,\n        distanceCharge: distanceCharge,\n        status: 'pending' as const,\n        paymentStatus: 'pending' as const,\n      };\n\n      const id = await createBooking(bookingData);\n      setBookingId(id);\n\n      // Try Stripe first, fallback to demo if it fails\n      try {\n        // Redirect to Stripe payment\n        const response = await fetch('/api/create-checkout-session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          bookingId: id,\n          amount: (calculatedPrice?.totalPrice || selectedPackage.price) * 100, // Convert to pence\n          customerEmail: data.email,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        throw new Error(errorData.error || `Failed to create checkout session (${response.status})`);\n      }\n\n      const session = await response.json();\n\n      if (session.error) {\n        throw new Error(session.error);\n      }\n\n        if (session.id) {\n          const stripe = await stripePromise;\n          if (stripe) {\n            // @ts-ignore - redirectToCheckout exists on client-side Stripe\n            const { error } = await stripe.redirectToCheckout({ sessionId: session.id });\n            if (error) {\n              throw error;\n            }\n          } else {\n            throw new Error('Stripe failed to load');\n          }\n        } else {\n          throw new Error('No session ID received');\n        }\n      } catch (stripeError: any) {\n        // If Stripe fails, redirect to demo payment\n        console.log('Stripe not configured, using demo payment:', stripeError.message);\n        window.location.href = `/demo-payment?booking_id=${id}`;\n        return;\n      }\n    } catch (error: any) {\n      console.error('Error creating booking:', error);\n      // If booking was created but payment failed, offer demo payment\n      if (bookingId) {\n        const useDemo = confirm('Stripe payment failed. Would you like to use the demo payment system instead?');\n        if (useDemo) {\n          window.location.href = `/demo-payment?booking_id=${bookingId}`;\n          return;\n        }\n      }\n      alert(`There was an error processing your booking: ${error.message || 'Please try again.'}`);\n      setIsSubmitting(false);\n    }\n  };\n\n  const availablePackages = selectedPackage\n    ? [selectedPackage]\n    : serviceType\n    ? getPackagesByService(serviceType)\n    : [];\n\n  return (\n    <div className=\"container mx-auto px-4 sm:px-6 py-8 sm:py-12 max-w-4xl\">\n      <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-6 sm:mb-8 text-center\">\n        Book Your Service\n      </h1>\n\n      {bookingId && (\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6\">\n          <p className=\"text-green-800\">\n            Booking created successfully! Redirecting to payment...\n          </p>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n        {/* Package Selection */}\n        {!selectedPackage && serviceType && (\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Select Package\n            </label>\n            <select\n              {...register('packageId')}\n              onChange={(e) => {\n                const pkg = getPackageById(e.target.value);\n                setSelectedPackage(pkg || null);\n                setValue('packageId', e.target.value);\n              }}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            >\n              <option value=\"\">Select a package...</option>\n              {availablePackages.map((pkg) => (\n                <option key={pkg.id} value={pkg.id}>\n                  {pkg.name} - £{pkg.price.toFixed(2)}\n                </option>\n              ))}\n            </select>\n            {errors.packageId && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.packageId.message}</p>\n            )}\n          </div>\n        )}\n\n        {selectedPackage && (\n          <div className=\"bg-[#092439]/10 rounded-lg p-4 sm:p-6 mb-6 border border-[#D4AF37]/30\">\n            <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-2\">\n              Selected Package: {selectedPackage.name}\n            </h3>\n            <p className=\"text-sm sm:text-base text-gray-700 mb-2\">{selectedPackage.description}</p>\n            <p className=\"text-xl sm:text-2xl font-bold text-[#D4AF37] mb-2\">\n              Base Price: £{selectedPackage.price.toFixed(2)}\n            </p>\n            <p className=\"text-xs sm:text-sm text-gray-600\">\n              Base price includes up to 50 miles. Additional miles charged separately.\n            </p>\n          </div>\n        )}\n\n        {/* Service Type */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Service Type\n          </label>\n          <select\n            {...register('serviceType')}\n            onChange={(e) => {\n              setValue('serviceType', e.target.value as ServiceType);\n              setSelectedPackage(null);\n              setValue('packageId', '');\n            }}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n          >\n            <option value=\"\">Select service type...</option>\n            <option value=\"removals\">Removals</option>\n            <option value=\"office-moving\">Office Moving</option>\n            <option value=\"house-moving\">House Moving</option>\n            <option value=\"pallets\">Pallets</option>\n          </select>\n          {errors.serviceType && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.serviceType.message}</p>\n          )}\n        </div>\n\n        {/* Customer Information */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Full Name *\n            </label>\n            <input\n              {...register('customerName')}\n              type=\"text\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            />\n            {errors.customerName && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.customerName.message}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email *\n            </label>\n            <input\n              {...register('email')}\n              type=\"email\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            />\n            {errors.email && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.email.message}</p>\n            )}\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Phone Number *\n          </label>\n          <input\n            {...register('phone')}\n            type=\"tel\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n          />\n          {errors.phone && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.phone.message}</p>\n          )}\n        </div>\n\n        {/* Addresses */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Pickup Address *\n          </label>\n          <textarea\n            {...register('pickupAddress')}\n            rows={3}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            placeholder=\"Enter full pickup address including postcode\"\n          />\n          {errors.pickupAddress && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.pickupAddress.message}</p>\n          )}\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Delivery Address *\n          </label>\n          <textarea\n            {...register('deliveryAddress')}\n            rows={3}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            placeholder=\"Enter full delivery address including postcode\"\n          />\n          {errors.deliveryAddress && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.deliveryAddress.message}</p>\n          )}\n        </div>\n\n        {/* Price Calculator - shows when package and addresses are entered */}\n        {selectedPackage && pickupAddress && deliveryAddress && \n         pickupAddress.length > 10 && deliveryAddress.length > 10 && (\n          <PriceCalculator\n            selectedPackage={selectedPackage}\n            pickupAddress={pickupAddress}\n            deliveryAddress={deliveryAddress}\n            onPriceCalculated={setCalculatedPrice}\n          />\n        )}\n\n        {/* Date and Time */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Pickup Date *\n            </label>\n            <input\n              {...register('pickupDate')}\n              type=\"date\"\n              min={new Date().toISOString().split('T')[0]}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            />\n            {errors.pickupDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.pickupDate.message}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Pickup Time *\n            </label>\n            <select\n              {...register('pickupTime')}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            >\n              <option value=\"\">Select time...</option>\n              <option value=\"08:00\">8:00 AM</option>\n              <option value=\"09:00\">9:00 AM</option>\n              <option value=\"10:00\">10:00 AM</option>\n              <option value=\"11:00\">11:00 AM</option>\n              <option value=\"12:00\">12:00 PM</option>\n              <option value=\"13:00\">1:00 PM</option>\n              <option value=\"14:00\">2:00 PM</option>\n              <option value=\"15:00\">3:00 PM</option>\n              <option value=\"16:00\">4:00 PM</option>\n              <option value=\"17:00\">5:00 PM</option>\n            </select>\n            {errors.pickupTime && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.pickupTime.message}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Special Instructions */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Special Instructions (Optional)\n          </label>\n          <textarea\n            {...register('specialInstructions')}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            placeholder=\"Any special requirements or instructions...\"\n          />\n        </div>\n\n        {/* Submit Button */}\n        <button\n          type=\"submit\"\n          disabled={isSubmitting || !selectedPackage}\n          className=\"w-full bg-[#092439] text-[#D4AF37] py-4 rounded-lg font-semibold text-lg hover:bg-[#0d3552] transition disabled:bg-gray-400 disabled:cursor-not-allowed\"\n        >\n          {isSubmitting ? 'Processing...' : 'Proceed to Payment'}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default function BookPage() {\n  return (\n    <Suspense fallback={<div className=\"container mx-auto px-4 py-12 text-center\">Loading...</div>}>\n      <BookPageContent />\n    </Suspense>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}