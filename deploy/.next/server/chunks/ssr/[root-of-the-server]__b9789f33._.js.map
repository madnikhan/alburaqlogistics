{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../lib/packages.ts","../../../../lib/firestore.ts","../../../../lib/distance-calculator.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","import { Package, ServiceType } from '@/types';\n\n// Packages tailored for Birmingham UK market with base prices\n// Final price = base price + (distance × £1.20 per mile)\nexport const packages: Package[] = [\n  // Removals Packages\n  {\n    id: 'removal-basic',\n    name: 'Basic Removal',\n    serviceType: 'removals',\n    description: 'Perfect for small moves within Birmingham',\n    price: 450, // Base price\n    features: [\n      '1-2 bedroom removal',\n      '2 movers',\n      'Standard van',\n      'Basic insurance',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 4,\n    maxDistance: 50, // Maximum distance covered\n    includes: ['Loading', 'Transportation', 'Unloading']\n  },\n  {\n    id: 'removal-standard',\n    name: 'Standard Removal',\n    serviceType: 'removals',\n    description: 'Ideal for medium-sized moves',\n    price: 600, // Base price\n    features: [\n      '2-3 bedroom removal',\n      '3 movers',\n      'Large van',\n      'Full insurance',\n      'Packing materials included',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 6,\n    maxDistance: 75,\n    includes: ['Loading', 'Transportation', 'Unloading', 'Packing assistance']\n  },\n  {\n    id: 'removal-premium',\n    name: 'Premium Removal',\n    serviceType: 'removals',\n    description: 'Complete removal service with full support',\n    price: 900, // Base price\n    features: [\n      '3+ bedroom removal',\n      '4 movers',\n      'Large van + trailer',\n      'Premium insurance',\n      'Full packing service',\n      'Furniture disassembly',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 8,\n    maxDistance: 100,\n    includes: ['Full packing', 'Loading', 'Transportation', 'Unloading', 'Unpacking', 'Furniture assembly']\n  },\n  \n  // Office Moving Packages\n  {\n    id: 'office-small',\n    name: 'Small Office Move',\n    serviceType: 'office-moving',\n    description: 'Perfect for small businesses (up to 10 employees)',\n    price: 600, // Base price\n    features: [\n      'Up to 20 desks',\n      'IT equipment handling',\n      '3 movers',\n      'Office insurance',\n      'Weekend/evening options',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 6,\n    maxDistance: 50,\n    includes: ['Desk moving', 'IT equipment', 'Filing cabinets', 'Basic setup']\n  },\n  {\n    id: 'office-medium',\n    name: 'Medium Office Move',\n    serviceType: 'office-moving',\n    description: 'Ideal for medium-sized businesses (10-30 employees)',\n    price: 900, // Base price\n    features: [\n      'Up to 40 desks',\n      'IT equipment handling',\n      '5 movers',\n      'Full office insurance',\n      'Flexible scheduling',\n      'Storage options',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 10,\n    maxDistance: 75,\n    includes: ['Complete office relocation', 'IT setup', 'Furniture assembly', 'Storage solutions']\n  },\n  {\n    id: 'office-large',\n    name: 'Large Office Move',\n    serviceType: 'office-moving',\n    description: 'Complete office relocation service',\n    price: 1500, // Base price\n    features: [\n      '40+ desks',\n      'Full IT infrastructure',\n      '8+ movers',\n      'Premium insurance',\n      'Project management',\n      'Storage & warehousing',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 16,\n    maxDistance: 100,\n    includes: ['Full relocation', 'IT infrastructure', 'Project management', 'Storage', 'Setup & configuration']\n  },\n  \n  // House Moving Packages\n  {\n    id: 'house-studio',\n    name: 'Studio/1 Bed Move',\n    serviceType: 'house-moving',\n    description: 'Perfect for studio or 1 bedroom properties',\n    price: 450, // Base price - matches Birmingham market (£450-£600)\n    features: [\n      'Studio/1 bedroom',\n      '2 movers',\n      'Medium van',\n      'Standard insurance',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 5,\n    maxDistance: 50,\n    includes: ['Loading', 'Transportation', 'Unloading']\n  },\n  {\n    id: 'house-2bed',\n    name: '2 Bedroom Move',\n    serviceType: 'house-moving',\n    description: 'Ideal for 2 bedroom homes',\n    price: 600, // Base price - matches Birmingham market (£600-£900)\n    features: [\n      '2 bedroom property',\n      '3 movers',\n      'Large van',\n      'Full insurance',\n      'Packing materials',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 7,\n    maxDistance: 75,\n    includes: ['Loading', 'Transportation', 'Unloading', 'Packing assistance']\n  },\n  {\n    id: 'house-3bed',\n    name: '3 Bedroom Move',\n    serviceType: 'house-moving',\n    description: 'Complete service for 3 bedroom homes',\n    price: 900, // Base price - matches Birmingham market (£900-£1,500)\n    features: [\n      '3 bedroom property',\n      '4 movers',\n      'Large van + trailer',\n      'Premium insurance',\n      'Full packing service',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 9,\n    maxDistance: 100,\n    includes: ['Full packing', 'Loading', 'Transportation', 'Unloading', 'Unpacking']\n  },\n  {\n    id: 'house-4bed',\n    name: '4+ Bedroom Move',\n    serviceType: 'house-moving',\n    description: 'Premium service for large family homes',\n    price: 1200, // Base price - matches Birmingham market (£1,200-£2,000+)\n    features: [\n      '4+ bedroom property',\n      '5+ movers',\n      'Multiple vehicles',\n      'Premium insurance',\n      'Full packing & unpacking',\n      'Furniture disassembly',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 12,\n    maxDistance: 150,\n    includes: ['Complete service', 'Packing', 'Loading', 'Transportation', 'Unloading', 'Unpacking', 'Assembly']\n  },\n  \n  // Pallet Services\n  {\n    id: 'pallet-single',\n    name: 'Single Pallet',\n    serviceType: 'pallets',\n    description: 'Single pallet delivery within Birmingham',\n    price: 85, // Base price\n    features: [\n      '1 standard pallet',\n      'Next day delivery',\n      'Standard insurance',\n      'Collection & delivery',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 2,\n    maxDistance: 30,\n    includes: ['Collection', 'Transportation', 'Delivery']\n  },\n  {\n    id: 'pallet-multi',\n    name: 'Multiple Pallets',\n    serviceType: 'pallets',\n    description: 'Multiple pallet delivery service',\n    price: 150, // Base price\n    features: [\n      '2-4 pallets',\n      'Next day delivery',\n      'Full insurance',\n      'Collection & delivery',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 3,\n    maxDistance: 50,\n    includes: ['Collection', 'Transportation', 'Delivery', 'Pallet wrapping']\n  },\n  {\n    id: 'pallet-bulk',\n    name: 'Bulk Pallet Service',\n    serviceType: 'pallets',\n    description: 'Large quantity pallet delivery',\n    price: 300, // Base price\n    features: [\n      '5+ pallets',\n      'Flexible scheduling',\n      'Premium insurance',\n      'Warehouse to warehouse',\n      'Distance-based pricing'\n    ],\n    estimatedHours: 5,\n    maxDistance: 100,\n    includes: ['Bulk collection', 'Transportation', 'Delivery', 'Pallet management']\n  }\n];\n\nexport const getPackagesByService = (serviceType: ServiceType): Package[] => {\n  return packages.filter(pkg => pkg.serviceType === serviceType);\n};\n\nexport const getPackageById = (id: string): Package | undefined => {\n  return packages.find(pkg => pkg.id === id);\n};\n\n// Price per mile for distance calculation\nexport const PRICE_PER_MILE = 1.20;\n","import { \n  collection, \n  addDoc, \n  getDocs, \n  doc, \n  getDoc, \n  updateDoc,\n  query,\n  where,\n  Timestamp\n} from 'firebase/firestore';\nimport { db } from './firebase';\nimport { Booking } from '@/types';\n\nconst BOOKINGS_COLLECTION = 'bookings';\n\nexport const createBooking = async (booking: Omit<Booking, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> => {\n  try {\n    const bookingData = {\n      ...booking,\n      createdAt: Timestamp.now(),\n      updatedAt: Timestamp.now()\n    };\n    const docRef = await addDoc(collection(db, BOOKINGS_COLLECTION), bookingData);\n    return docRef.id;\n  } catch (error) {\n    console.error('Error creating booking:', error);\n    throw error;\n  }\n};\n\nexport const getBooking = async (bookingId: string): Promise<Booking | null> => {\n  try {\n    const docRef = doc(db, BOOKINGS_COLLECTION, bookingId);\n    const docSnap = await getDoc(docRef);\n    \n    if (docSnap.exists()) {\n      const data = docSnap.data();\n      return {\n        id: docSnap.id,\n        ...data,\n        createdAt: data.createdAt?.toDate(),\n        updatedAt: data.updatedAt?.toDate()\n      } as Booking;\n    }\n    return null;\n  } catch (error) {\n    console.error('Error getting booking:', error);\n    throw error;\n  }\n};\n\nexport const updateBookingStatus = async (\n  bookingId: string, \n  status: Booking['status'],\n  paymentStatus?: Booking['paymentStatus']\n): Promise<void> => {\n  try {\n    const docRef = doc(db, BOOKINGS_COLLECTION, bookingId);\n    const updateData: any = {\n      status,\n      updatedAt: Timestamp.now()\n    };\n    \n    if (paymentStatus) {\n      updateData.paymentStatus = paymentStatus;\n    }\n    \n    await updateDoc(docRef, updateData);\n  } catch (error) {\n    console.error('Error updating booking:', error);\n    throw error;\n  }\n};\n\nexport const getBookingsByEmail = async (email: string): Promise<Booking[]> => {\n  try {\n    const q = query(collection(db, BOOKINGS_COLLECTION), where('email', '==', email));\n    const querySnapshot = await getDocs(q);\n    \n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data(),\n      createdAt: doc.data().createdAt?.toDate(),\n      updatedAt: doc.data().updatedAt?.toDate()\n    })) as Booking[];\n  } catch (error) {\n    console.error('Error getting bookings:', error);\n    throw error;\n  }\n};\n\nexport const getAllBookings = async (): Promise<Booking[]> => {\n  try {\n    const querySnapshot = await getDocs(collection(db, BOOKINGS_COLLECTION));\n    \n    return querySnapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data(),\n      createdAt: doc.data().createdAt?.toDate(),\n      updatedAt: doc.data().updatedAt?.toDate()\n    })) as Booking[];\n  } catch (error) {\n    console.error('Error getting all bookings:', error);\n    throw error;\n  }\n};\n\n","/**\n * Calculate distance between two UK addresses\n * Supports multiple providers:\n * 1. OpenRouteService (FREE - recommended)\n * 2. Google Maps API (requires API key)\n * 3. Postcode estimation (fallback - always works)\n */\n\nexport interface Location {\n  address: string;\n  postcode?: string;\n}\n\nexport interface DistanceResult {\n  distance: number; // in miles\n  duration?: number; // in minutes\n  error?: string;\n}\n\n/**\n * Extract postcode from address string\n */\nexport function extractPostcode(address: string): string | null {\n  // UK postcode pattern: e.g., B1 1AA, B12 8AB, etc.\n  const postcodeRegex = /([A-Z]{1,2}[0-9][A-Z0-9]?\\s?[0-9][A-Z]{2})/i;\n  const match = address.match(postcodeRegex);\n  return match ? match[1].toUpperCase().replace(/\\s/g, ' ') : null;\n}\n\n/**\n * Calculate distance using OpenRouteService API (FREE)\n * Sign up at https://openrouteservice.org/ for a free API key\n * Free tier: 2,000 requests/day\n */\nasync function calculateDistanceWithOpenRouteService(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult | null> {\n  const apiKey = process.env.NEXT_PUBLIC_OPENROUTE_API_KEY;\n  \n  if (!apiKey) {\n    return null; // API not configured\n  }\n\n  try {\n    // First, geocode addresses to get coordinates\n    const geocodeStart = await fetch(\n      `https://api.openrouteservice.org/geocoding/search?` +\n      `api_key=${apiKey}` +\n      `&text=${encodeURIComponent(startAddress)}` +\n      `&boundary.country=GB`\n    );\n    const geocodeEnd = await fetch(\n      `https://api.openrouteservice.org/geocoding/search?` +\n      `api_key=${apiKey}` +\n      `&text=${encodeURIComponent(endAddress)}` +\n      `&boundary.country=GB`\n    );\n\n    const startData = await geocodeStart.json();\n    const endData = await geocodeEnd.json();\n\n    if (!startData.features?.[0] || !endData.features?.[0]) {\n      return null; // Geocoding failed\n    }\n\n    const startCoords = startData.features[0].geometry.coordinates; // [lng, lat]\n    const endCoords = endData.features[0].geometry.coordinates;\n\n    // Calculate distance using directions API\n    const directionsResponse = await fetch(\n      `https://api.openrouteservice.org/v2/directions/driving-car?` +\n      `api_key=${apiKey}` +\n      `&start=${startCoords[0]},${startCoords[1]}` +\n      `&end=${endCoords[0]},${endCoords[1]}`\n    );\n\n    const directionsData = await directionsResponse.json();\n\n    if (directionsData.features?.[0]?.properties?.segments?.[0]) {\n      const segment = directionsData.features[0].properties.segments[0];\n      const distanceInMeters = segment.distance;\n      const durationInSeconds = segment.duration;\n      \n      const distanceInMiles = distanceInMeters / 1609.34; // Convert to miles\n      const durationInMinutes = durationInSeconds / 60;\n\n      return {\n        distance: Math.round(distanceInMiles * 10) / 10,\n        duration: Math.round(durationInMinutes),\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.error('OpenRouteService API error:', error);\n    return null; // Fall back to other methods\n  }\n}\n\n/**\n * Calculate distance using Google Maps Distance Matrix API\n */\nasync function calculateDistanceWithGoogleMaps(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult | null> {\n  const apiKey = process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY;\n  \n  if (!apiKey) {\n    return null;\n  }\n\n  try {\n    const response = await fetch(\n      `https://maps.googleapis.com/maps/api/distancematrix/json?` +\n      `origins=${encodeURIComponent(startAddress)}` +\n      `&destinations=${encodeURIComponent(endAddress)}` +\n      `&units=imperial` +\n      `&key=${apiKey}`\n    );\n\n    const data = await response.json();\n\n    if (data.status === 'OK' && data.rows[0]?.elements[0]?.status === 'OK') {\n      const element = data.rows[0].elements[0];\n      const distanceInMiles = element.distance.value / 1609.34;\n      const durationInMinutes = element.duration.value / 60;\n\n      return {\n        distance: Math.round(distanceInMiles * 10) / 10,\n        duration: Math.round(durationInMinutes),\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Google Maps API error:', error);\n    return null;\n  }\n}\n\n/**\n * Calculate distance using UK Postcode.io API (FREE for UK postcodes)\n * No API key required for basic distance calculation\n */\nasync function calculateDistanceWithPostcodeIO(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult | null> {\n  const startPostcode = extractPostcode(startAddress);\n  const endPostcode = extractPostcode(endAddress);\n\n  if (!startPostcode || !endPostcode) {\n    return null; // Need postcodes for this API\n  }\n\n  try {\n    // Get coordinates for both postcodes\n    const startResponse = await fetch(\n      `https://api.postcodes.io/postcodes/${encodeURIComponent(startPostcode.replace(/\\s/g, ''))}`\n    );\n    const endResponse = await fetch(\n      `https://api.postcodes.io/postcodes/${encodeURIComponent(endPostcode.replace(/\\s/g, ''))}`\n    );\n\n    const startData = await startResponse.json();\n    const endData = await endResponse.json();\n\n    if (startData.status !== 200 || endData.status !== 200) {\n      return null;\n    }\n\n    const startLat = startData.result.latitude;\n    const startLng = startData.result.longitude;\n    const endLat = endData.result.latitude;\n    const endLng = endData.result.longitude;\n\n    // Calculate straight-line distance (Haversine formula)\n    const R = 3959; // Earth's radius in miles\n    const dLat = (endLat - startLat) * Math.PI / 180;\n    const dLng = (endLng - startLng) * Math.PI / 180;\n    const a = \n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(startLat * Math.PI / 180) * Math.cos(endLat * Math.PI / 180) *\n      Math.sin(dLng / 2) * Math.sin(dLng / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    const distance = R * c;\n\n    // Add 20% for road distance vs straight-line\n    const roadDistance = distance * 1.2;\n\n    return {\n      distance: Math.round(roadDistance * 10) / 10,\n    };\n  } catch (error) {\n    console.error('Postcode.io API error:', error);\n    return null;\n  }\n}\n\n/**\n * Estimate distance based on UK postcodes (fallback method)\n * Uses postcode area codes to estimate distance\n */\nfunction estimateDistanceFromPostcodes(startAddress: string, endAddress: string): number {\n  const startPostcode = extractPostcode(startAddress);\n  const endPostcode = extractPostcode(endAddress);\n\n  // If we can't extract postcodes, estimate based on address similarity\n  if (!startPostcode || !endPostcode) {\n    if (startAddress.toLowerCase().includes('birmingham') && \n        endAddress.toLowerCase().includes('birmingham')) {\n      return 8; // Average local Birmingham move\n    }\n    return 15; // Default estimate\n  }\n\n  // Extract area codes (first part of postcode)\n  const startArea = startPostcode.split(' ')[0];\n  const endArea = endPostcode.split(' ')[0];\n\n  // Same area code = very local (1-5 miles)\n  if (startArea === endArea) {\n    return 3;\n  }\n\n  // Different area codes in Birmingham (B postcodes)\n  if (startArea.startsWith('B') && endArea.startsWith('B')) {\n    return 12; // Average Birmingham local move\n  }\n\n  // One is Birmingham (B), other is not = regional (20-50 miles)\n  if ((startArea.startsWith('B') && !endArea.startsWith('B')) ||\n      (!startArea.startsWith('B') && endArea.startsWith('B'))) {\n    return 35;\n  }\n\n  // Both non-Birmingham = long distance (50+ miles)\n  return 75;\n}\n\n/**\n * Calculate distance between two addresses\n * Tries multiple methods in order:\n * 1. OpenRouteService (FREE - recommended)\n * 2. Google Maps API (if configured)\n * 3. Postcode.io (FREE - UK postcodes only)\n * 4. Postcode estimation (always works)\n */\nexport async function calculateDistance(\n  startAddress: string,\n  endAddress: string\n): Promise<DistanceResult> {\n  // Try OpenRouteService first (free and accurate)\n  const openRouteResult = await calculateDistanceWithOpenRouteService(startAddress, endAddress);\n  if (openRouteResult) {\n    return openRouteResult;\n  }\n\n  // Try Google Maps API\n  const googleResult = await calculateDistanceWithGoogleMaps(startAddress, endAddress);\n  if (googleResult) {\n    return googleResult;\n  }\n\n  // Try Postcode.io (free for UK postcodes)\n  const postcodeIOResult = await calculateDistanceWithPostcodeIO(startAddress, endAddress);\n  if (postcodeIOResult) {\n    return postcodeIOResult;\n  }\n\n  // Fallback to postcode estimation\n  const estimatedDistance = estimateDistanceFromPostcodes(startAddress, endAddress);\n  return {\n    distance: estimatedDistance,\n  };\n}\n\n/**\n * Calculate price based on base price + distance\n * Local moves (under 50 miles): Base price only\n * Long-distance (50-100 miles): Base price + £1.20 per mile for miles over 50\n * Very long distance (100+ miles): Base price + £1.50 per mile for miles over 100\n */\nexport function calculatePrice(\n  basePrice: number,\n  distance: number,\n  pricePerMile: number = 1.20\n): number {\n  const LOCAL_MOVE_THRESHOLD = 50; // Miles included in base price\n  const LONG_DISTANCE_THRESHOLD = 100; // Miles for higher rate\n\n  // Local moves: base price only (distance included)\n  if (distance <= LOCAL_MOVE_THRESHOLD) {\n    return basePrice;\n  }\n\n  // Long-distance moves: charge per mile for miles over threshold\n  const milesOverThreshold = distance - LOCAL_MOVE_THRESHOLD;\n  \n  // For very long distances (100+ miles), use higher rate\n  if (distance > LONG_DISTANCE_THRESHOLD) {\n    const miles50to100 = LONG_DISTANCE_THRESHOLD - LOCAL_MOVE_THRESHOLD;\n    const milesOver100 = distance - LONG_DISTANCE_THRESHOLD;\n    const distanceCharge = (miles50to100 * pricePerMile) + (milesOver100 * 1.50);\n    return basePrice + distanceCharge;\n  }\n\n  // Standard long-distance (50-100 miles)\n  const distanceCharge = milesOverThreshold * pricePerMile;\n  return basePrice + distanceCharge;\n}\n\n/**\n * Format distance for display\n */\nexport function formatDistance(distance: number): string {\n  if (distance < 1) {\n    return `${Math.round(distance * 10) / 10} miles`;\n  }\n  return `${Math.round(distance * 10) / 10} miles`;\n}\n\n/**\n * Get pricing breakdown for display\n */\nexport function getPricingBreakdown(basePrice: number, distance: number) {\n  const LOCAL_MOVE_THRESHOLD = 50;\n  const LONG_DISTANCE_THRESHOLD = 100;\n  const PRICE_PER_MILE = 1.20;\n  const PRICE_PER_MILE_LONG = 1.50;\n\n  if (distance <= LOCAL_MOVE_THRESHOLD) {\n    return {\n      basePrice,\n      distance,\n      includedMiles: distance,\n      chargeableMiles: 0,\n      distanceCharge: 0,\n      totalPrice: basePrice,\n      isLocalMove: true,\n    };\n  }\n\n  const milesOverThreshold = distance - LOCAL_MOVE_THRESHOLD;\n  let distanceCharge = 0;\n  let chargeableMiles = 0;\n\n  if (distance > LONG_DISTANCE_THRESHOLD) {\n    const miles50to100 = LONG_DISTANCE_THRESHOLD - LOCAL_MOVE_THRESHOLD;\n    const milesOver100 = distance - LONG_DISTANCE_THRESHOLD;\n    distanceCharge = (miles50to100 * PRICE_PER_MILE) + (milesOver100 * PRICE_PER_MILE_LONG);\n    chargeableMiles = milesOverThreshold;\n  } else {\n    distanceCharge = milesOverThreshold * PRICE_PER_MILE;\n    chargeableMiles = milesOverThreshold;\n  }\n\n  return {\n    basePrice,\n    distance,\n    includedMiles: LOCAL_MOVE_THRESHOLD,\n    chargeableMiles,\n    distanceCharge,\n    totalPrice: basePrice + distanceCharge,\n    isLocalMove: false,\n  };\n}\n\n/**\n * Price per mile for distance calculation\n */\nexport const PRICE_PER_MILE = 1.20;\nexport const LOCAL_MOVE_THRESHOLD = 50; // Miles included in base price\nexport const LONG_DISTANCE_THRESHOLD = 100; // Miles for higher per-mile rate\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}