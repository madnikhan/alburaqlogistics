{"version":3,"sources":["../../../../app/book/page.tsx","../../../../node_modules/%40stripe/stripe-js/dist/index.mjs","../../../../components/PriceCalculator.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, Suspense } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { getPackageById, getPackagesByService } from '@/lib/packages';\nimport { createBooking } from '@/lib/firestore';\nimport { Package, ServiceType } from '@/types';\nimport { loadStripe } from '@stripe/stripe-js';\nimport PriceCalculator from '@/components/PriceCalculator';\nimport { calculateDistance, calculatePrice, getPricingBreakdown } from '@/lib/distance-calculator';\n\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY || '');\n\nconst bookingSchema = z.object({\n  customerName: z.string().min(2, 'Name must be at least 2 characters'),\n  email: z.string().email('Invalid email address'),\n  phone: z.string().min(10, 'Phone number must be at least 10 digits'),\n  serviceType: z.enum(['removals', 'office-moving', 'house-moving', 'pallets']),\n  packageId: z.string(),\n  pickupAddress: z.string().min(10, 'Please provide a complete pickup address'),\n  deliveryAddress: z.string().min(10, 'Please provide a complete delivery address'),\n  pickupDate: z.string().min(1, 'Please select a pickup date'),\n  pickupTime: z.string().min(1, 'Please select a pickup time'),\n  specialInstructions: z.string().optional(),\n});\n\ntype BookingFormData = z.infer<typeof bookingSchema>;\n\nfunction BookPageContent() {\n  const searchParams = useSearchParams();\n  const [selectedPackage, setSelectedPackage] = useState<Package | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [bookingId, setBookingId] = useState<string | null>(null);\n  const [calculatedPrice, setCalculatedPrice] = useState<{\n    basePrice: number;\n    distance: number;\n    distanceCharge: number;\n    totalPrice: number;\n  } | null>(null);\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    setValue,\n    watch,\n  } = useForm<BookingFormData>({\n    resolver: zodResolver(bookingSchema),\n  });\n\n  const serviceType = watch('serviceType');\n  const pickupAddress = watch('pickupAddress');\n  const deliveryAddress = watch('deliveryAddress');\n\n  useEffect(() => {\n    const serviceParam = searchParams.get('service') as ServiceType;\n    const packageParam = searchParams.get('package');\n\n    if (serviceParam) {\n      setValue('serviceType', serviceParam);\n    }\n    if (packageParam) {\n      setValue('packageId', packageParam);\n      const pkg = getPackageById(packageParam);\n      setSelectedPackage(pkg || null);\n    }\n  }, [searchParams, setValue]);\n\n  const onSubmit = async (data: BookingFormData) => {\n    if (!selectedPackage) {\n      alert('Please select a package');\n      return;\n    }\n\n    setIsSubmitting(true);\n    setBookingId(null);\n\n    try {\n      // Calculate distance and final price\n      const distanceResult = await calculateDistance(data.pickupAddress, data.deliveryAddress);\n      const distance = distanceResult.distance;\n      const basePrice = selectedPackage.price;\n      \n      // Use calculated price if available, otherwise calculate now\n      let finalPrice: number;\n      let distanceCharge: number;\n      \n      if (calculatedPrice) {\n        finalPrice = calculatedPrice.totalPrice;\n        distanceCharge = calculatedPrice.distanceCharge;\n      } else {\n        const breakdown = getPricingBreakdown(basePrice, distance);\n        finalPrice = breakdown.totalPrice;\n        distanceCharge = breakdown.distanceCharge;\n      }\n\n      // Create booking in Firestore\n      const bookingData = {\n        ...data,\n        totalPrice: finalPrice,\n        basePrice: basePrice,\n        distance: distance,\n        distanceCharge: distanceCharge,\n        status: 'pending' as const,\n        paymentStatus: 'pending' as const,\n      };\n\n      const id = await createBooking(bookingData);\n      setBookingId(id);\n\n      // Try Stripe first, fallback to demo if it fails\n      try {\n        // Redirect to Stripe payment\n        const response = await fetch('/api/create-checkout-session', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          bookingId: id,\n          amount: (calculatedPrice?.totalPrice || selectedPackage.price) * 100, // Convert to pence\n          customerEmail: data.email,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        throw new Error(errorData.error || `Failed to create checkout session (${response.status})`);\n      }\n\n      const session = await response.json();\n\n      if (session.error) {\n        throw new Error(session.error);\n      }\n\n        if (session.id) {\n          const stripe = await stripePromise;\n          if (stripe) {\n            // @ts-ignore - redirectToCheckout exists on client-side Stripe\n            const { error } = await stripe.redirectToCheckout({ sessionId: session.id });\n            if (error) {\n              throw error;\n            }\n          } else {\n            throw new Error('Stripe failed to load');\n          }\n        } else {\n          throw new Error('No session ID received');\n        }\n      } catch (stripeError: any) {\n        // If Stripe fails, redirect to demo payment\n        console.log('Stripe not configured, using demo payment:', stripeError.message);\n        window.location.href = `/demo-payment?booking_id=${id}`;\n        return;\n      }\n    } catch (error: any) {\n      console.error('Error creating booking:', error);\n      // If booking was created but payment failed, offer demo payment\n      if (bookingId) {\n        const useDemo = confirm('Stripe payment failed. Would you like to use the demo payment system instead?');\n        if (useDemo) {\n          window.location.href = `/demo-payment?booking_id=${bookingId}`;\n          return;\n        }\n      }\n      alert(`There was an error processing your booking: ${error.message || 'Please try again.'}`);\n      setIsSubmitting(false);\n    }\n  };\n\n  const availablePackages = selectedPackage\n    ? [selectedPackage]\n    : serviceType\n    ? getPackagesByService(serviceType)\n    : [];\n\n  return (\n    <div className=\"container mx-auto px-4 sm:px-6 py-8 sm:py-12 max-w-4xl\">\n      <h1 className=\"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-6 sm:mb-8 text-center\">\n        Book Your Service\n      </h1>\n\n      {bookingId && (\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6\">\n          <p className=\"text-green-800\">\n            Booking created successfully! Redirecting to payment...\n          </p>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n        {/* Package Selection */}\n        {!selectedPackage && serviceType && (\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Select Package\n            </label>\n            <select\n              {...register('packageId')}\n              onChange={(e) => {\n                const pkg = getPackageById(e.target.value);\n                setSelectedPackage(pkg || null);\n                setValue('packageId', e.target.value);\n              }}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            >\n              <option value=\"\">Select a package...</option>\n              {availablePackages.map((pkg) => (\n                <option key={pkg.id} value={pkg.id}>\n                  {pkg.name} - £{pkg.price.toFixed(2)}\n                </option>\n              ))}\n            </select>\n            {errors.packageId && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.packageId.message}</p>\n            )}\n          </div>\n        )}\n\n        {selectedPackage && (\n          <div className=\"bg-[#092439]/10 rounded-lg p-4 sm:p-6 mb-6 border border-[#D4AF37]/30\">\n            <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-2\">\n              Selected Package: {selectedPackage.name}\n            </h3>\n            <p className=\"text-sm sm:text-base text-gray-700 mb-2\">{selectedPackage.description}</p>\n            <p className=\"text-xl sm:text-2xl font-bold text-[#D4AF37] mb-2\">\n              Base Price: £{selectedPackage.price.toFixed(2)}\n            </p>\n            <p className=\"text-xs sm:text-sm text-gray-600\">\n              Base price includes up to 50 miles. Additional miles charged separately.\n            </p>\n          </div>\n        )}\n\n        {/* Service Type */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Service Type\n          </label>\n          <select\n            {...register('serviceType')}\n            onChange={(e) => {\n              setValue('serviceType', e.target.value as ServiceType);\n              setSelectedPackage(null);\n              setValue('packageId', '');\n            }}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n          >\n            <option value=\"\">Select service type...</option>\n            <option value=\"removals\">Removals</option>\n            <option value=\"office-moving\">Office Moving</option>\n            <option value=\"house-moving\">House Moving</option>\n            <option value=\"pallets\">Pallets</option>\n          </select>\n          {errors.serviceType && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.serviceType.message}</p>\n          )}\n        </div>\n\n        {/* Customer Information */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Full Name *\n            </label>\n            <input\n              {...register('customerName')}\n              type=\"text\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            />\n            {errors.customerName && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.customerName.message}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Email *\n            </label>\n            <input\n              {...register('email')}\n              type=\"email\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            />\n            {errors.email && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.email.message}</p>\n            )}\n          </div>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Phone Number *\n          </label>\n          <input\n            {...register('phone')}\n            type=\"tel\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n          />\n          {errors.phone && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.phone.message}</p>\n          )}\n        </div>\n\n        {/* Addresses */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Pickup Address *\n          </label>\n          <textarea\n            {...register('pickupAddress')}\n            rows={3}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            placeholder=\"Enter full pickup address including postcode\"\n          />\n          {errors.pickupAddress && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.pickupAddress.message}</p>\n          )}\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Delivery Address *\n          </label>\n          <textarea\n            {...register('deliveryAddress')}\n            rows={3}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            placeholder=\"Enter full delivery address including postcode\"\n          />\n          {errors.deliveryAddress && (\n            <p className=\"text-red-500 text-sm mt-1\">{errors.deliveryAddress.message}</p>\n          )}\n        </div>\n\n        {/* Price Calculator - shows when package and addresses are entered */}\n        {selectedPackage && pickupAddress && deliveryAddress && \n         pickupAddress.length > 10 && deliveryAddress.length > 10 && (\n          <PriceCalculator\n            selectedPackage={selectedPackage}\n            pickupAddress={pickupAddress}\n            deliveryAddress={deliveryAddress}\n            onPriceCalculated={setCalculatedPrice}\n          />\n        )}\n\n        {/* Date and Time */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Pickup Date *\n            </label>\n            <input\n              {...register('pickupDate')}\n              type=\"date\"\n              min={new Date().toISOString().split('T')[0]}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            />\n            {errors.pickupDate && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.pickupDate.message}</p>\n            )}\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Pickup Time *\n            </label>\n            <select\n              {...register('pickupTime')}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            >\n              <option value=\"\">Select time...</option>\n              <option value=\"08:00\">8:00 AM</option>\n              <option value=\"09:00\">9:00 AM</option>\n              <option value=\"10:00\">10:00 AM</option>\n              <option value=\"11:00\">11:00 AM</option>\n              <option value=\"12:00\">12:00 PM</option>\n              <option value=\"13:00\">1:00 PM</option>\n              <option value=\"14:00\">2:00 PM</option>\n              <option value=\"15:00\">3:00 PM</option>\n              <option value=\"16:00\">4:00 PM</option>\n              <option value=\"17:00\">5:00 PM</option>\n            </select>\n            {errors.pickupTime && (\n              <p className=\"text-red-500 text-sm mt-1\">{errors.pickupTime.message}</p>\n            )}\n          </div>\n        </div>\n\n        {/* Special Instructions */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Special Instructions (Optional)\n          </label>\n          <textarea\n            {...register('specialInstructions')}\n            rows={4}\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#D4AF37] focus:border-transparent\"\n            placeholder=\"Any special requirements or instructions...\"\n          />\n        </div>\n\n        {/* Submit Button */}\n        <button\n          type=\"submit\"\n          disabled={isSubmitting || !selectedPackage}\n          className=\"w-full bg-[#092439] text-[#D4AF37] py-4 rounded-lg font-semibold text-lg hover:bg-[#0d3552] transition disabled:bg-gray-400 disabled:cursor-not-allowed\"\n        >\n          {isSubmitting ? 'Processing...' : 'Proceed to Payment'}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default function BookPage() {\n  return (\n    <Suspense fallback={<div className=\"container mx-auto px-4 py-12 text-center\">Loading...</div>}>\n      <BookPageContent />\n    </Suspense>\n  );\n}\n\n","var RELEASE_TRAIN = 'clover';\n\nvar runtimeVersionToUrlVersion = function runtimeVersionToUrlVersion(version) {\n  return version === 3 ? 'v3' : version;\n};\n\nvar ORIGIN = 'https://js.stripe.com';\nvar STRIPE_JS_URL = \"\".concat(ORIGIN, \"/\").concat(RELEASE_TRAIN, \"/stripe.js\");\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar STRIPE_JS_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/(v3|[a-z]+)\\/stripe\\.js(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\n\nvar isStripeJSURL = function isStripeJSURL(url) {\n  return V3_URL_REGEX.test(url) || STRIPE_JS_URL_REGEX.test(url);\n};\n\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(ORIGIN, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!isStripeJSURL(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(STRIPE_JS_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"8.5.2\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise$1 = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function (cause) {\n    reject(new Error('Failed to load Stripe.js', {\n      cause: cause\n    }));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise$1 !== null) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise$1[\"catch\"](function (error) {\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var pk = args[0];\n  var isTestKey = pk.match(/^pk_test/); // @ts-expect-error this is not publicly typed\n\n  var version = runtimeVersionToUrlVersion(maybeStripe.version);\n  var expectedVersion = RELEASE_TRAIN;\n\n  if (isTestKey && version !== expectedVersion) {\n    console.warn(\"Stripe.js@\".concat(version, \" was loaded on the page, but @stripe/stripe-js@\").concat(\"8.5.2\", \" expected Stripe.js@\").concat(expectedVersion, \". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning\"));\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise) {\n    return stripePromise;\n  }\n\n  stripePromise = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n  return stripePromise;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","'use client';\n\nimport { useState, useEffect } from 'react';\nimport { \n  calculateDistance, \n  calculatePrice, \n  formatDistance, \n  getPricingBreakdown,\n  LOCAL_MOVE_THRESHOLD \n} from '@/lib/distance-calculator';\nimport { Package } from '@/types';\n\ninterface PriceCalculatorProps {\n  selectedPackage: Package | null;\n  pickupAddress: string;\n  deliveryAddress: string;\n  onPriceCalculated?: (price: {\n    basePrice: number;\n    distance: number;\n    distanceCharge: number;\n    totalPrice: number;\n  }) => void;\n}\n\nexport default function PriceCalculator({\n  selectedPackage,\n  pickupAddress,\n  deliveryAddress,\n  onPriceCalculated\n}: PriceCalculatorProps) {\n  const [distance, setDistance] = useState<number | null>(null);\n  const [calculating, setCalculating] = useState(false);\n  const [totalPrice, setTotalPrice] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (selectedPackage && pickupAddress && deliveryAddress && \n        pickupAddress.length > 10 && deliveryAddress.length > 10) {\n      calculateDistanceAndPrice();\n    } else {\n      setDistance(null);\n      setTotalPrice(null);\n    }\n  }, [selectedPackage, pickupAddress, deliveryAddress]);\n\n  const calculateDistanceAndPrice = async () => {\n    if (!selectedPackage) return;\n\n    setCalculating(true);\n    \n    try {\n      // Calculate distance (uses Google Maps API if available, otherwise estimates)\n      const distanceResult = await calculateDistance(pickupAddress, deliveryAddress);\n      const calculatedDistance = distanceResult.distance;\n      \n      const basePrice = selectedPackage.price;\n      const breakdown = getPricingBreakdown(basePrice, calculatedDistance);\n      const finalPrice = breakdown.totalPrice;\n\n      setDistance(calculatedDistance);\n      setTotalPrice(finalPrice);\n\n      // Notify parent component\n      if (onPriceCalculated) {\n        onPriceCalculated({\n          basePrice,\n          distance: calculatedDistance,\n          distanceCharge: breakdown.distanceCharge,\n          totalPrice: finalPrice\n        });\n      }\n    } catch (error) {\n      console.error('Error calculating distance:', error);\n      // Fallback to base price if calculation fails\n      setDistance(0);\n      setTotalPrice(selectedPackage.price);\n    } finally {\n      setCalculating(false);\n    }\n  };\n\n  if (!selectedPackage) {\n    return null;\n  }\n\n  if (calculating) {\n    return (\n      <div className=\"bg-blue-50 rounded-lg p-4 mb-6\">\n        <div className=\"flex items-center\">\n          <svg className=\"animate-spin h-5 w-5 text-blue-600 mr-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <span className=\"text-blue-700\">Calculating price...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (distance === null || totalPrice === null) {\n    return (\n      <div className=\"bg-gray-50 rounded-lg p-4 mb-6\">\n        <p className=\"text-sm text-gray-600\">\n          Enter pickup and delivery addresses to calculate the total price.\n        </p>\n      </div>\n    );\n  }\n\n  const breakdown = getPricingBreakdown(selectedPackage.price, distance);\n\n  return (\n    <div className=\"bg-[#092439]/10 rounded-lg p-4 sm:p-6 mb-6 border border-[#D4AF37]/30\">\n      <h3 className=\"text-lg sm:text-xl font-bold text-gray-900 mb-4\">\n        Price Breakdown\n      </h3>\n      \n      <div className=\"space-y-2 mb-4\">\n        <div className=\"flex justify-between text-sm sm:text-base\">\n          <span className=\"text-gray-600\">Base Price:</span>\n          <span className=\"font-medium text-gray-900\">£{breakdown.basePrice.toFixed(2)}</span>\n        </div>\n        \n        <div className=\"flex justify-between text-sm sm:text-base\">\n          <span className=\"text-gray-600\">Distance:</span>\n          <span className=\"font-medium text-gray-900\">{formatDistance(distance)}</span>\n        </div>\n\n        {breakdown.isLocalMove ? (\n          <div className=\"bg-green-50 rounded p-2 mt-2\">\n            <p className=\"text-xs sm:text-sm text-green-800\">\n              ✓ Local move: Distance included in base price (up to {LOCAL_MOVE_THRESHOLD} miles)\n            </p>\n          </div>\n        ) : (\n          <>\n            <div className=\"flex justify-between text-sm sm:text-base mt-2\">\n              <span className=\"text-gray-600\">\n                Included miles ({breakdown.includedMiles} miles):\n              </span>\n              <span className=\"font-medium text-gray-900\">£0.00</span>\n            </div>\n            <div className=\"flex justify-between text-sm sm:text-base\">\n              <span className=\"text-gray-600\">\n                Additional miles ({breakdown.chargeableMiles.toFixed(1)} miles × £1.20/mile):\n              </span>\n              <span className=\"font-medium text-gray-900\">£{breakdown.distanceCharge.toFixed(2)}</span>\n            </div>\n            {distance > 100 && (\n              <p className=\"text-xs text-gray-600 mt-1\">\n                Note: Miles over 100 charged at £1.50/mile\n              </p>\n            )}\n          </>\n        )}\n        \n        <div className=\"border-t border-[#D4AF37]/30 pt-2 mt-2\">\n          <div className=\"flex justify-between\">\n            <span className=\"text-lg sm:text-xl font-semibold text-gray-900\">Total Price:</span>\n            <span className=\"text-2xl sm:text-3xl font-bold text-[#D4AF37]\">\n              £{totalPrice.toFixed(2)}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"text-xs sm:text-sm text-gray-600 bg-white rounded p-2\">\n        <p className=\"mb-1\">\n          <strong>Pricing:</strong> Base price includes up to {LOCAL_MOVE_THRESHOLD} miles. \n          {!breakdown.isLocalMove && ' Additional miles charged at £1.20/mile (50-100 miles) or £1.50/mile (100+ miles).'}\n        </p>\n        <p>Distance: {formatDistance(distance)} \n          {process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY ? ' (calculated)' : ' (estimated from postcodes)'}\n        </p>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","ignoreList":[1]}