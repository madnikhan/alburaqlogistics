module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},19337,a=>{"use strict";a.i(69387);var b=a.i(60574),c=a.i(18740);let d="bookings",e=async a=>{try{let e={...a,createdAt:b.Timestamp.now(),updatedAt:b.Timestamp.now()};return(await (0,b.addDoc)((0,b.collection)(c.db,d),e)).id}catch(a){throw console.error("Error creating booking:",a),a}},f=async a=>{try{let e=(0,b.doc)(c.db,d,a),f=await (0,b.getDoc)(e);if(f.exists()){let a=f.data();return{id:f.id,...a,createdAt:a.createdAt?.toDate(),updatedAt:a.updatedAt?.toDate()}}return null}catch(a){throw console.error("Error getting booking:",a),a}},g=async(a,e,f)=>{try{let g=(0,b.doc)(c.db,d,a),h={status:e,updatedAt:b.Timestamp.now()};f&&(h.paymentStatus=f),await (0,b.updateDoc)(g,h)}catch(a){throw console.error("Error updating booking:",a),a}},h=async a=>{try{let e=(0,b.query)((0,b.collection)(c.db,d),(0,b.where)("email","==",a));return(await (0,b.getDocs)(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate(),updatedAt:a.data().updatedAt?.toDate()}))}catch(a){throw console.error("Error getting bookings:",a),a}},i=async()=>{try{return(await (0,b.getDocs)((0,b.collection)(c.db,d))).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate(),updatedAt:a.data().updatedAt?.toDate()}))}catch(a){throw console.error("Error getting all bookings:",a),a}};a.s(["createBooking",0,e,"getAllBookings",0,i,"getBooking",0,f,"getBookingsByEmail",0,h,"updateBookingStatus",0,g])},66337,a=>{"use strict";let b=[{id:"removal-basic",name:"Basic Removal",serviceType:"removals",description:"Perfect for small moves within Birmingham",price:450,features:["1-2 bedroom removal","2 movers","Standard van","Basic insurance","Distance-based pricing"],estimatedHours:4,maxDistance:50,includes:["Loading","Transportation","Unloading"]},{id:"removal-standard",name:"Standard Removal",serviceType:"removals",description:"Ideal for medium-sized moves",price:600,features:["2-3 bedroom removal","3 movers","Large van","Full insurance","Packing materials included","Distance-based pricing"],estimatedHours:6,maxDistance:75,includes:["Loading","Transportation","Unloading","Packing assistance"]},{id:"removal-premium",name:"Premium Removal",serviceType:"removals",description:"Complete removal service with full support",price:900,features:["3+ bedroom removal","4 movers","Large van + trailer","Premium insurance","Full packing service","Furniture disassembly","Distance-based pricing"],estimatedHours:8,maxDistance:100,includes:["Full packing","Loading","Transportation","Unloading","Unpacking","Furniture assembly"]},{id:"office-small",name:"Small Office Move",serviceType:"office-moving",description:"Perfect for small businesses (up to 10 employees)",price:600,features:["Up to 20 desks","IT equipment handling","3 movers","Office insurance","Weekend/evening options","Distance-based pricing"],estimatedHours:6,maxDistance:50,includes:["Desk moving","IT equipment","Filing cabinets","Basic setup"]},{id:"office-medium",name:"Medium Office Move",serviceType:"office-moving",description:"Ideal for medium-sized businesses (10-30 employees)",price:900,features:["Up to 40 desks","IT equipment handling","5 movers","Full office insurance","Flexible scheduling","Storage options","Distance-based pricing"],estimatedHours:10,maxDistance:75,includes:["Complete office relocation","IT setup","Furniture assembly","Storage solutions"]},{id:"office-large",name:"Large Office Move",serviceType:"office-moving",description:"Complete office relocation service",price:1500,features:["40+ desks","Full IT infrastructure","8+ movers","Premium insurance","Project management","Storage & warehousing","Distance-based pricing"],estimatedHours:16,maxDistance:100,includes:["Full relocation","IT infrastructure","Project management","Storage","Setup & configuration"]},{id:"house-studio",name:"Studio/1 Bed Move",serviceType:"house-moving",description:"Perfect for studio or 1 bedroom properties",price:450,features:["Studio/1 bedroom","2 movers","Medium van","Standard insurance","Distance-based pricing"],estimatedHours:5,maxDistance:50,includes:["Loading","Transportation","Unloading"]},{id:"house-2bed",name:"2 Bedroom Move",serviceType:"house-moving",description:"Ideal for 2 bedroom homes",price:600,features:["2 bedroom property","3 movers","Large van","Full insurance","Packing materials","Distance-based pricing"],estimatedHours:7,maxDistance:75,includes:["Loading","Transportation","Unloading","Packing assistance"]},{id:"house-3bed",name:"3 Bedroom Move",serviceType:"house-moving",description:"Complete service for 3 bedroom homes",price:900,features:["3 bedroom property","4 movers","Large van + trailer","Premium insurance","Full packing service","Distance-based pricing"],estimatedHours:9,maxDistance:100,includes:["Full packing","Loading","Transportation","Unloading","Unpacking"]},{id:"house-4bed",name:"4+ Bedroom Move",serviceType:"house-moving",description:"Premium service for large family homes",price:1200,features:["4+ bedroom property","5+ movers","Multiple vehicles","Premium insurance","Full packing & unpacking","Furniture disassembly","Distance-based pricing"],estimatedHours:12,maxDistance:150,includes:["Complete service","Packing","Loading","Transportation","Unloading","Unpacking","Assembly"]},{id:"pallet-single",name:"Single Pallet",serviceType:"pallets",description:"Single pallet delivery within Birmingham",price:85,features:["1 standard pallet","Next day delivery","Standard insurance","Collection & delivery","Distance-based pricing"],estimatedHours:2,maxDistance:30,includes:["Collection","Transportation","Delivery"]},{id:"pallet-multi",name:"Multiple Pallets",serviceType:"pallets",description:"Multiple pallet delivery service",price:150,features:["2-4 pallets","Next day delivery","Full insurance","Collection & delivery","Distance-based pricing"],estimatedHours:3,maxDistance:50,includes:["Collection","Transportation","Delivery","Pallet wrapping"]},{id:"pallet-bulk",name:"Bulk Pallet Service",serviceType:"pallets",description:"Large quantity pallet delivery",price:300,features:["5+ pallets","Flexible scheduling","Premium insurance","Warehouse to warehouse","Distance-based pricing"],estimatedHours:5,maxDistance:100,includes:["Bulk collection","Transportation","Delivery","Pallet management"]}];a.s(["getPackageById",0,a=>b.find(b=>b.id===a),"getPackagesByService",0,a=>b.filter(b=>b.serviceType===a)])},10484,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19337),f=a.i(66337),g=a.i(56711),h=a.i(38246);function i(){let a=(0,d.useSearchParams)(),i=(0,d.useRouter)(),j=a.get("booking_id"),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1);(0,c.useEffect)(()=>{j?s():n(!1)},[j]);let s=async()=>{try{if(j){let a=await (0,e.getBooking)(j);l(a)}}catch(a){console.error("Error loading booking:",a)}finally{n(!1)}},t=async()=>{if(j){p(!0);try{let a=await fetch("/api/demo-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bookingId:j})}),b=await a.json();b.success?(r(!0),setTimeout(()=>{i.push(`/booking-success?booking_id=${j}`)},2e3)):(alert("Payment failed: "+(b.error||"Unknown error")),p(!1))}catch(a){console.error("Error processing payment:",a),alert("There was an error processing your payment. Please try again."),p(!1)}}};if(m)return(0,b.jsx)("div",{className:"container mx-auto px-4 py-12 text-center",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mx-auto mb-4"}),(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})});if(!k)return(0,b.jsxs)("div",{className:"container mx-auto px-4 py-12 text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Booking Not Found"}),(0,b.jsx)(h.default,{href:"/book",className:"text-[#D4AF37] hover:text-[#E5C866]",children:"Go to Booking Page"})]});let u=(0,f.getPackageById)(k.packageId);return(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 py-8 sm:py-12 max-w-2xl",children:[(0,b.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,b.jsxs)("div",{className:"flex items-start",children:[(0,b.jsx)("div",{className:"text-yellow-600 mr-2",children:"⚠️"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-yellow-800 mb-1",children:"Demo Payment Mode"}),(0,b.jsx)("p",{className:"text-sm text-yellow-700",children:"This is a demo payment system for testing purposes. No real payment will be processed."})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 sm:p-8 mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-6 text-center",children:"Complete Your Payment"}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 sm:p-6 mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Summary"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm sm:text-base",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Service:"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:u?.name||k.serviceType})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Customer:"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:k.customerName})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Pickup Date:"}),(0,b.jsxs)("span",{className:"font-medium text-gray-900",children:[k.pickupDate?(0,g.format)(new Date(k.pickupDate),"MMM dd, yyyy"):k.pickupDate," at ",k.pickupTime]})]}),k.basePrice&&k.distance&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Base Price:"}),(0,b.jsxs)("span",{className:"font-medium text-gray-900",children:["£",k.basePrice.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm sm:text-base",children:[(0,b.jsxs)("span",{className:"text-gray-600",children:["Distance (",k.distance.toFixed(1)," miles × £1.20):"]}),(0,b.jsxs)("span",{className:"font-medium text-gray-900",children:["£",k.distanceCharge?.toFixed(2)||(1.2*k.distance).toFixed(2)]})]})]}),(0,b.jsx)("div",{className:"border-t border-gray-200 pt-2 mt-2",children:(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total Amount:"}),(0,b.jsxs)("span",{className:"text-2xl font-bold text-[#D4AF37]",children:["£",k.totalPrice.toFixed(2)]})]})})]})]}),q?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"✓"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"Payment Successful!"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Redirecting to confirmation page..."})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Card Number"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:"4242 4242 4242 4242",readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm"}),(0,b.jsx)("span",{className:"absolute right-3 top-3 text-xs text-gray-500 bg-white px-2 py-1 rounded",children:"DEMO"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Demo card number (always works)"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date"}),(0,b.jsx)("input",{type:"text",value:"12/25",readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVC"}),(0,b.jsx)("input",{type:"text",value:"123",readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cardholder Name"}),(0,b.jsx)("input",{type:"text",value:k.customerName,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50"})]}),(0,b.jsx)("button",{onClick:t,disabled:o,className:"w-full bg-[#092439] text-[#D4AF37] py-4 rounded-lg font-semibold text-lg hover:bg-[#0d3552] transition disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",children:o?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-[#D4AF37]",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Payment..."]}):`Pay \xa3${k.totalPrice.toFixed(2)}`}),(0,b.jsx)("p",{className:"text-xs text-center text-gray-500",children:'By clicking "Pay", you agree this is a demo transaction. No real payment will be processed.'})]})]}),(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)(h.default,{href:"/book",className:"text-sm text-gray-600 hover:text-gray-900",children:"← Back to Booking"})})]})}function j(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"container mx-auto px-4 py-12 text-center",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2 mx-auto mb-4"}),(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}),children:(0,b.jsx)(i,{})})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__30602da4._.js.map